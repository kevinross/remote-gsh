<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Remote Groovy Shell by safrain</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Remote Groovy Shell</h1>
        <p class="header">Lightweight debugging / management tool for Java servlet web applications</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/safrain/remote-gsh/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/safrain/remote-gsh/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/safrain/remote-gsh">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/safrain">safrain</a></p>


      </header>
      <section>
        <h1>Remote Groovy Shell</h1>

<p>Remote Groovy Shell is a light weight debugging/management tool embbeded in Java servlet web applications.</p>

<p>You can interact with you application with groovy language in a bash like shell, jush like using groovysh.</p>

<p>Through this Remote Groovy Shell, you can do a lot of fantastic things to you application when its running, with the power of groovy language.</p>

<h2>Motivations</h2>

<ul>
<li>I want to inspect bean properties without attach &amp; debug jvm</li>
<li>I want to call specific method of a bean without add any fxxking jsps</li>
<li>I want to mock some behavior conveniently </li>
<li>I want to modify specific property of a bean and see what happens without editing the code and restarting the application</li>
</ul><h2>Features</h2>

<ul>
<li>Execute groovy command or local script file at remote server </li>
<li>Lightweight, no additional dependencies(except groovy runtime), easy to embed into your project</li>
<li>Bash like client, no manual installation required, just one command to get everything done</li>
<li>Easy to extend to support various web application frameworks</li>
</ul><h2>TODOs</h2>

<ul>
<li>Shell command line completion</li>
</ul><h2>User Guide</h2>

<h3>Embbed rgsh in you project</h3>

<p>1.Add following jars into you classpath</p>

<ul>
<li>
<a href="http://g.cn">Remote Groovy Shell</a> TODO</li>
<li>
<a href="http://groovy.codehaus.org/Download">Groovy Runtime</a> Any version greater than 1.8.6 is OK </li>
</ul><p>For maven projects, add below content into you pom</p>

<pre><code>TODO, im uploading it to maven central

&lt;dependency&gt;
    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
    &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
    &lt;version&gt;1.8.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>2.Add RgshFilter configuration into your <em>web.xml</em></p>

<p><strong>Attention:Exposing this filter may cause serious security problems, make sure you have ACL on this</strong></p>

<pre><code>&lt;filter&gt;
    &lt;filter-name&gt;Rgsh&lt;/filter-name&gt;
    &lt;filter-class&gt;com.github.safrain.remotegsh.RgshFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;Rgsh&lt;/filter-name&gt;
    &lt;url-pattern&gt;/admin/rgsh&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre>

<p><strong>Filter init params</strong></p>

<p><em>charset</em> Request and Response character encoding, 'utf-8' as default.</p>

<p><em>scriptExtensions</em> Script extension path, you can set multiple classpath here, separated by comma, 'com/github/safrain/remotegsh/server/extension/spring.groovy' as default.</p>

<p><em>scriptExtensionCharset</em>  Charset of script extensions, 'utf-8' as default.</p>

<h3>Using shell client</h3>

<p>Assume that you configured RgshFilter in you application at http://localhost/, '/admin/rgsh' as url pattern:</p>

<h4>Show help screen</h4>

<pre><code>curl -s http://localhost/admin/rgsh
</code></pre>

<p>Then you can follow the instructions shown on the screen.</p>

<h4>Install</h4>

<pre><code>curl -s http://localhost/admin/rgsh?r=install | bash
</code></pre>

<p>Two file will be downloaded to your current folder, an executable jar file and a bash script  <em>rgsh</em>.</p>

<p>Your server host and RgshFilter charset setting will be write into <em>rgsh</em> as its default settings.</p>

<h4>Starting interactive shell</h4>

<pre><code>./rgsh
</code></pre>

<p>Then feel free to use as a common groovy shell.</p>

<p>Use -s switch to specify server host url.</p>

<p>Use -c switch to specify request charset.</p>

<h4>Upload script and run</h4>

<p>You can upload a local script file and execute it on server.</p>

<pre><code>./rgsh foobar.groovy
</code></pre>

<h4>Default Settings</h4>

<p>Just Edit <em>rgsh</em> and modify DEFAULT_SERVER, DEFAULT_CHARSET variable</p>

<h3>Extending</h3>

<h4>Script extension</h4>

<p><em>Script Extensions</em> will be executed before script you uploaded(or before your first shell command),
by default the script is <em>com/github/safrain/remotegsh/server/extension/spring.groovy</em>, adding support to Spring framework
and you can customize it using filter init parameter <em>scriptExtensions</em>
In the extension script, you can put some variables or function into the script context to add support to various frameworks
Or you can simply put some of your favorite utilities in it.</p>

<p><strong>Built-in variables</strong></p>

<p><em>_request</em> Just the request</p>

<p><em>_response</em> Just the response</p>

<p><em>_charset</em> Request and response charset, same as <em>RgshFilter.charset</em></p>

<p><strong>Spring support</strong>(com/github/safrain/remotegsh/server/extension/spring.groovy)</p>

<p><em>_context</em> Just the spring ApplicationContext in your ServletContext</p>

<p><em>beans</em> Shortcut to access your beans, use 'beans.beanName' to access your bean</p>

<h2>Example</h2>

<p>You can find an example project in <em>remote-gsh-example/</em> directory, the example project is a very very simple PetStore project, you can build it and run the war file
in any type of servlet container, or you can just run <em>mvn run:jetty</em> to start the built-in jetty
server and find whats going on, One thing to say is that the project contains several problems,
which made the application unavailable, but with the power of Remote Groovy Shell and Groovy language,
you can even fix those problems without restarting your application</p>

<p><em>examples.groovy</em> will show you what you can do with you application using Remote Groovy Shell, it is very simple, just read it!</p>

<p>Use command below to run this script on the server(Assume that you are using the buily-in Jetty)</p>

<pre><code>curl -X POST "http://localhost/admin/rgsh" -T example.groovy
</code></pre>

<p>Of course you can use the <em>rgsh</em> client :D</p>

<pre><code>./rgsh example.groovy
</code></pre>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>